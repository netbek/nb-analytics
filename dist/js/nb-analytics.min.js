/*
 * nb-analytics
 * https://github.com/netbek/nb-analytics
 *
 * @author Hein Bekker <hein@netbek.co.za>
 * @copyright (c) 2015 Hein Bekker
 * @license http://www.gnu.org/licenses/agpl-3.0.txt AGPLv3
 */
!function(a,b,c){"use strict";function d(){var a={trackingId:c,create:c};return{set:function(b){_.merge(a,b)},$get:function(){return a}}}function e(c,d,e,f,g,h){var i,j={initialized:!1,ready:!1};this.init=function(){if(!j.initialized){j.initialized=!0,i=e.defer();var c=g(function(){a.ga&&(g.cancel(c),a.ga("create",h.trackingId,b.isDefined(h.create)?h.create:"auto"),j.ready=!0,i.resolve(a.ga))},100),d="ga-js",f=document.getElementById(d);if(f);else{var k="//www.google-analytics.com/analytics.js";f=document.createElement("script"),f.id=d,f.async=!0,f.src=k;var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(f,l)}}return i.promise},this.trackPageView=function(b){this.init().then(function(){a.ga("set","page",b),a.ga("send","pageview",b)})},this.trackEvent=function(b,c,d,e){this.init().then(function(){a.ga("send","event",b,c,d,e)})},this.trackSocial=function(b,c,d,e){this.init().then(function(){a.ga("send","social",b,c,d,e)})}}b.module("nb.analytics",[]).provider("nbAnalyticsConfig",d).service("nbAnalytics",e),e.$inject=["$rootScope","$window","$q","$timeout","$interval","nbAnalyticsConfig"]}(window,window.angular);